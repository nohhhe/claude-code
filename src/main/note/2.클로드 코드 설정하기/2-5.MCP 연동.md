2-5.MCP 연동
=========================
## ⭕ MCP 이해하기
### ◉ MCP란 무엇인가?
MCP는 AI 모델이 외부 리소스와 안전하게 상호작용할 수 있도록 설계된 개방형 표준입니다.

### ◉ MCP와 JSON-RPC
MCP는 내부적으로 JSON-RPC 2.0 프로토콜을 기반으로 합니다. JSON-RPC는 원격 프로시저 호출을 단순한 JSON 형식으로 정의한 규격으로, 다음과 같은 특징이 있습니다.
- 단순성: 요청과 응답이 직관적이며 구조가 간단
- 언어 중립성: JSON 형식을 따르므로 어떤 언어에서도 구현 가능
- 정확성: 명령어 파싱이 아니라 구조화된 객체 교환 -> 데이터 손실 최소화

### ◉ 주요 활용 영역
- 데이터베이스 연동
  - DB 와 직접 연결
  - 실시간 데이터 조회 및 분석
  - 쿼리 최적화 제안, 데이터 패턴 분석
- 클라우드 서비스 통합
  - AWS, Azure, GCP 리소스 상태 확인
  - 자동 스케일링, 비용 최적화 제안
  - 멀티클라우드 환경 관리
- 개발 도구 연결
  - 깃허브 저장소 분석 및 코드 리뷰
  - 지라 티켓과 이슈 동기화
  - CI/CD 파이프라인 제어 및 자동화
- 모니터링 시스템
  - 실시간 로그 수집 및 이상 탐지
  - 성능 메트릭 추적 및 예측
  - 장애 원인 자동 분석 및 대응 제안

## ⭕ MCP vs 프롬프트 엔지니어링 비교
| 항목      | 프롬프트 + 명령어            | MCP |
|---------|-----------------------|---|
| 초기 설정   | 별도 설정 불필요             | MP 서버 설치 및 구성 필요 |
| 작업 속도   | 명령어 실행 -> 결과 복사 -> 전달 | 직접 연결 후 즉시 분석 |
| 데이터 정확성 | 복사/붙여넣기 과정에서 누락 가능 | 구조화된 응답으로 100% 정확 |
| 자동화 가능성 | 스크립트 작성 필요 | 기본적으로 자동화 지원 |
| 팀 협업 | 개인별 스크립트 관리 | 표준화된 인터페이스 공유 |
| 보안 | 수동 권한 관리 | 역할 기반 접근 제어, 체계적 권한 시스템 |

## ⭕ MCP 연결 방식 이해하기
### ◉ STDIO(Standard Input/Output)
가장 기본적이면서도 효율적인 방식입니다. 로컬 환경에서 애플리케이션이나 데이터베이스를 다룰 때 사용됩니다.

#### ✦ 특징
- 같은 머신에서 프로세스 간 직접 통신
- 네트워크 오버헤드 없음 -> 가장 빠른 응답 속도
- 간단한 설정으로 바로 사용 가능

#### ✦ 활용 예시
- 로컬 개발 환경의 SQLite 데이터베이스
- 파일 시스템 접근
- 로컬 도커 컨테이너 관리

### ◉ Streamable HTTP
HTTP 기반 프로토콜입니다. 원격의 서버로부터 데이터를 주고받을 때 유용합니다. 깃허브나 아틀라시안 같은 SaaS 서비스들은 공식 MCP 서버를 제공하며, 이 방식으로 연동할 수 있습니다.

#### ✦ 특징
- 표준 HTTP 프로토콜 사용
- 기존 REST API와 완벽 호환
- 인증 및 보안 기능 완비

#### ✦ 활용 예시
- 외부 SaaS 서비스 연동
- 마이크로서비스 아키텍처
- 클라우드 API 통합

### SSE(Server-Sent Events)
과거 사용되던 방식 그러나 연결을 두 개 유지해야 하는 구조적 단점 때문에 현재는 사용되고 있지 않음

## ⭕ 고급 활용 패턴
- 멀티 소스 분석: 여러 MCP 소스를 동시에 연결하여 종합적인 분석 수행
- 통합 자동화 워크플로: MCP를 활용하여 단일 이벤트가 전체 프로세스를 자동으로 실행하도록 설계

## ⭕ 실전 활용 예시
- 통합 대시보드: 여러 MCP 소스에서 실시간 데이터를 수집하여 하나의 대시보드에 시각화
- 자동 리포트 생성: MCP를 통해 데이터베이스와 클라우드 리소스 상태를 분석하고 주기적으로 리포트 생성

## ⭕ MCP 서버 구성하기
### ◉ claude mcp add 명령
claude mcp add 명령으로 MCP 서버를 추가할 수 있습니다.
추가된 MCP 설정은 로컬 및 전역스코프는 \$HOME/.claude.json에 프로젝트 스코프는 \$PROJECT/.mcp.json에 저장됩니다.
> claude mcp add <서버이름> [옵션] [-- 인수들]

> claude mcp add mcp-server-postgres

### ◉ 주요 옵션
- 스코드 설정(--scope, -s)
  - 전역 설치: claude mcp add mcp-server-github --scope user
  - 프로젝트 설치: claude mcp add mcp-server-github --scope project
- 전송 방식 설정(--transport, -t)
  - STDIO: claude mcp add mcp-server-sqlite --transport stdio
  - Streamable HTTP: claude mcp add mcp-server-github --transport http
- HTTP 헤더 설정(--header, -H)
  - Authorization 헤더 추가: claude mcp add mcp-server-api -H "Authorization: Bearer your_token"
  - 여러 헤더 추가: claude mcp add mcp-server-api -H "Header1: Value1" -H "Header2: Value2"

### ◉ 주요 MCP 서버 목록
- 데이터 베이스 연동
  - mcp-server-postgres: PostgreSQL 데이터베이스 연결
  - mongodb-mcp-server: MongoDB 데이터베이스 연결
  - mcp-server-mysql: MySQL 데이터베이스 연결
  - mcp-sqlite: SQLite 데이터베이스 연결
- 개발 도구 연동
  - github-mcp-server: GitHub 저장소, PR, 이슈 관리
  - gitlab-mcp: GitLab 프로젝트 관리
- 클라우드 서비스
  - awslabs.core-mcp-server: AWS 리소스 관리 및 모니터링
  - @azure/mcp: Azure 서비스 통합
  - gcp-mcp: 구글 클라우드 플랫폼 연동
- 문서 및 정보
  - context7: 개발 문서 및 라이브럴 ㅣ정보 검색
  - serena: LSP 기반 코드 정보 관리
  - mcp-server-atlassian: 지라, 컨플루언스 연동
- 모니터링 및 분석
  - mcp-grafana: Grafana 대시보드 및 메트릭 분석
  - mcp.sentry.dev/mcp: Sentry를 통한 이슈 및 에러 확인
  - datadog-mcp-server: 데이터독 메트릭 및 로그 등 확인

### ◉ MCP 서버 관리
- 현재 설정된 MCP 서버 목록: claude mcp list
- 특정 MCP 서버 상태 확인: claude mcp get github
- MCP 서버 제거: claude mcp remove github
- 현재 프로젝트에 설정된 MCP approved/rejected 설정 초기화: claude mcp reset-project-choices

#### ❗️ 다음 스터디 전에 컨플, 지라, 데이터독 연동 해보기
